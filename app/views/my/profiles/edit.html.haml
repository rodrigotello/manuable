= simple_form_for(current_user, :url => my_profile_path, :html => { :method => :put }) do |f|
  = f.error_notification
  - if params[:f] == 's'
    = f.input :name
    = f.input :avatar, as: :file
    = f.association :state
    = f.input :city_id, as: :string, :autocomplete => "off", input_html: { name: 'city-autocomplete', id: 'city-autocomplete', value: f.object.city ? "#{f.object.city.name}, #{f.object.city.state.name}" : '' }
    = f.input :city_id, as: :hidden
  - if params[:f] == 'p'
    .form-inputs
      = f.input :email, :required => true, :autofocus => true
      = f.input :password, :autocomplete => "oft", :hint => "leave it blank if you don't want to change it", :required => false
      = f.input :password_confirmation, :required => false
      = f.input :current_password, :hint => "we need your current password to confirm your changes", :required => true

  .form-actions
    = f.button :submit, "Update"

/ %h3 Cancel my account
/ %p
/   Unhappy? #{link_to "Cancel my account", registration_path(:user), :data => { :confirm => "Are you sure?" }, :method => :delete}.
/ = link_to "Back", :back

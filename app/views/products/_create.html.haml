- if product.attachments.length >= 1
  = div_for product, class: "product-card #{size}" do
    - liked = product.respond_to?(:liked) ? product.liked.to_i != 0 : false
    .product-card-image{ style: "background-image: url(#{ product.attachments.first.attachment.url :xlarge })" }
      - if user_signed_in?
        - if !liked
          = link_to( image_tag('heart-r.png'), like_product_path(product, format: 'json'), method: :post, class: "like", remote: true)
        - else
          = link_to( image_tag('heart-r.png'), "javascript:void(1)", class: "like")
      - else
        = link_to( image_tag('heart-r.png'), "#sign_popup", "data-toggle" => "modal", class: "like")
      = link_to image_tag('share-r.png'), "//www.facebook.com/sharer/sharer.php?u=#{CGI.escape product_url(product)}", target: "_blank", class: 'fbshare'

    .product-card-info
      %span.product-card-name= truncate product.name, length: 20, omission: 'â€¦'
      = link_to user_path(product.user), class: 'user' do
        %span.user-name= product.user.first_name
